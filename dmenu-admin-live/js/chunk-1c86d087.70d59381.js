(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c86d087"],{"0d11":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var a=i("032a"),n=i("ddd3");const s=a["a"].getInstance();class r{constructor(t){this.loading=!1,this.error=!1,this.isEdit=!1,this.title=t.title,this.table=t.table,this.form=t.form,this.id=t.id,this.isEdit&&this.find(),t.callBack&&(this.callBack=t.callBack),this.editForm="undefined"!=typeof t.editForm?t.editForm:t.form}find(){return new Promise((t,e)=>{this.editForm.loading=!0,this.loading=!0;let i=`${this.table}/${this.id}`;s.get(i).then(e=>{this.editForm.state=e,this.editForm.loading=!1,this._reset(),n["a"].$emit("changeStateAppForm",e),t(e)}).catch(t=>{this.loading=!1,this.error=!0,e(t)})})}async setId(t){this.id!=t&&(this.id=t,this.isEdit=!0,await this.find())}submit(){let t=this.table+"/editadd",e="post";this.isEdit&&(t+="/"+this.id,e="put");const i=this.isEdit?this.editForm.state:this.form.state;return new Promise((a,r)=>{s[e](t,i).then(t=>{n["a"].$emit("resetAppForm");this.isEdit;return this._reset(),this.resetEdit(),a(t)}).catch(t=>r(t))})}_reset(){this.loading=!1,this.error=!1}resetEdit(){this.isEdit=!1,this.id=void 0}}},"3afd":function(t,e,i){"use strict";i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return l}));var a=i("032a");const n=a["a"].getInstance(),s=t=>new Promise((e,i)=>{n.post("upload",t,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{e(t)}).catch(t=>{i(t)})}),r=t=>new Promise((e,i)=>{n.delete(`delete/${t.table}/${t.id}`).then(t=>{e(t)}).catch(t=>{i(t)})}),l=t=>new Promise((e,i)=>{n.post("delete/file",{Path:t}).then(t=>{e(t)}).catch(t=>{i(t)})})},"78fe":function(t,e,i){"use strict";var a=i("23a7"),n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(a["a"],{attrs:{"truncate-length":"15",rules:t.input.rules?t.input.rules:[],"append-icon":t.input.required?"mdi-asterisk":"",label:t.$t(t.input.label),outlined:""},on:{change:t.upload},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})},s=[],r=i("2b0e"),l=i("032a"),o=i("3afd"),d=i("b0fd");l["a"].getInstance();var u=r["a"].extend({name:"file-input",data(){return{loading:!0,removeImage:!1,path:"",file:null}},props:{input:Object,initial:String},created(){this.path="http://waveoffice.mooo.com:5000/assets/"+this.initial},methods:{remove(){const t=Object(d["e"])(this.path);Object(o["b"])(t).then(()=>{this.file=null,this.$emit("change",{key:this.input.key,value:null}),this.removeImage=!this.removeImage})},upload(){if(null==this.file)return;let t=new FormData;t.append("file",this.file),Object(o["c"])(t).then(t=>{this.path=t,this.removeImage=!1;const e=Object(d["e"])(t);this.$emit("input",e)})}}}),c=u,h=i("2877"),p=Object(h["a"])(c,n,s,!1,null,null,null);e["a"]=p.exports},8816:function(t,e,i){"use strict";var a=i("8336"),n=i("62ad"),s=i("a523"),r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"py-12"},[e(s["a"],[e("app-form",{attrs:{form:t.activeForm},scopedSlots:t._u([{key:"form-submit",fn:function(){return[e(n["a"],{attrs:{cols:"12"}},[e(a["a"],{staticClass:"app-btn",on:{click:function(e){return e.preventDefault(),t.submit()}}},[t._v(t._s(t.$t("submit")))])],1)]},proxy:!0}])})],1)],1)},l=[],o=i("40b0"),d=i("0d11"),u=i("ddd3"),c=i("afbc"),h={data(){let t=this.d.form;return{activeForm:t}},props:{d:{required:!0,type:d["a"]}},watch:{"$route.params.id":{handler:function(t){this.activeForm=t?this.d.editForm:this.d.form},deep:!0,immediate:!0}},methods:{async submit(){const t=await this.activeForm.validate();t&&this.d.submit().then(t=>{null!=this.d.callBack?this.d.callBack(this.activeForm.state):this.$router.back()}).catch(t=>{this.activeForm.error=t})}},components:{"app-form":o["a"]},async created(){c["a"].currentRoute.params.id&&await this.d.setId(parseInt(c["a"].currentRoute.params.id)),u["a"].$on("editAddFind",async t=>{await this.d.setId(t)})}},p=h,m=i("2877"),f=Object(m["a"])(p,r,l,!1,null,null,null);e["a"]=f.exports},"8e41":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("edit-add",{attrs:{d:t.d}})},n=[],s=i("afbc"),r=i("ddd3"),l=i("ae4f"),o=i("370f"),d=i("7173"),u=i("2b0e"),c=i("b955"),h=i("78fe"),p=i("fbf5"),m=i("26d8");const f={name:"imagePath",generateInputHtml:()=>u["a"].extend(h["a"]),label:"Img",cols:6,type:"file",value:""},b={name:"groupName",generateInputHtml:()=>u["a"].extend(c["a"]),rules:[t=>Object(m["b"])(t)],label:"name",cols:6,type:"text",required:!0,value:""},g={name:"groupNameEn",generateInputHtml:()=>u["a"].extend(c["a"]),rules:[t=>Object(m["b"])(t)],label:"name_en",cols:6,required:!0,type:"text",value:""},v={name:"parentCode",cache:!1,text:"name",cols:6,initialFetch:!0,generateInputHtml:()=>u["a"].extend(p["a"]),clearable:!0,valueKey:"code",type:"combo",url:"groups/list",label:"parent"},w=[new o["a"](b),new o["a"](g),new o["a"](Object(l["a"])(v)),new o["a"](f)],y={title:"edit_categories",inputs:w},F=[new o["a"](b),new o["a"](g),new o["a"](v),new o["a"](f)],_={title:"insert_categories",inputs:F},k=new d["a"](_),x=new d["a"](y);var $={addForm:k,editForm:x},I=i("0d11");const j=t=>{r["a"].$emit("getGroupsTree"),"categories-edit"==s["a"].currentRoute.name&&s["a"].push({name:"categories-create"})},O={title:"groups",table:"groups",form:$.addForm,editForm:$.editForm,callBack:j},E=new I["a"](O);var P=E,q=i("8816"),B={components:{"edit-add":q["a"]},computed:{d(){return P}}},C=B,D=i("2877"),H=Object(D["a"])(C,a,n,!1,null,null,null);e["default"]=H.exports},fbf5:function(t,e,i){"use strict";var a=i("2b5d"),n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e(a["a"],{attrs:{"cache-items":t.input.cache,"item-text":t.input.text,"item-value":t.input.valueKey,items:t.input.items,disabled:t.input.disabled,readonly:t.input.disabled,rules:t.input.rules?t.input.rules:[],loading:t.loading,"prepend-icon":t.input.icon,"append-icon":t.input.required?"mdi-asterisk":"","return-object":"","hide-details":"",outlined:"",clearable:!t.input.required,label:t.$t(t.input.label),"single-line":""},on:{change:t.change,"click:clear":t.change},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)},s=[],r=i("2b0e"),l=i("032a"),o=i("b0fd"),d=i("ddd3");const u=l["a"].getInstance();var c=r["a"].extend({data(){return{loading:!1,model:null}},props:{input:Object},watch:{input:t=>{console.log("value"),console.log(t)}},methods:{change(t){console.log("val"),console.log(t),"undefined"!=typeof this.input.change&&this.input.change(t);const e="undefined"==typeof t||null==t?null:t[this.input.valueKey];this.$emit("input",e)},getData(){this.loading=!0,u.get(`${this.input.url}?${Object(o["f"])(this.input.payload)}`).then(t=>{this.loading=!1,this.input.items=t,this.setModel(this.input.value)})},setModel(t){let e=this.input.items.filter(e=>e[""+this.input.valueKey]==t)[0];this.model=e}},created(){this.input.initialFetch&&this.getData(),d["a"].$on("changeComboValue",t=>{t.key==this.input.name&&this.setModel(t.value)}),d["a"].$on("getGroupsTree",t=>{this.getData()})}}),h=c,p=i("2877"),m=Object(p["a"])(h,n,s,!1,null,null,null);e["a"]=m.exports}}]);
//# sourceMappingURL=chunk-1c86d087.70d59381.js.map